- alias: 'Vacuum/All/Clean'
  trigger:
    - platform: state
      entity_id: group.family
      from: 'home'
      to: 'not_home'
      for:
        minutes: 30
  condition:
  - condition: and
    conditions:
    - condition: time
      weekday:
      - mon
      - tue
      - wed
      - fri
    - condition: state
      entity_id: 'group.family'
      state: 'not_home'
  action:
    - service: vacuum.start
      data:
        entity_id: vacuum.dusty
    - service: vacuum.start
      data:
        entity_id: vacuum.rosie

- alias: 'Vacuum/All/StopWhenHome'
  trigger:
    platform: state
    entity_id: group.family
    from: 'not_home'
    to: 'home'
    for:
      minutes: 5
  action:
    - service: vacuum.return_to_base
      data:
        entity_id: vacuum.dusty
    - service: vacuum.return_to_base
      data:
        entity_id: vacuum.rosie
